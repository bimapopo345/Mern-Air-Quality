# Ultimate Full-Stack MERN Application: Internal Corporate IoT Air Quality Dashboard

## ğŸŒŸ Project Overview

This is an internal enterprise tool designed for monitoring and analyzing IoT air quality data in corporate environments. The application features a modern, futuristic glassmorphism design with advanced data visualization and dual authentication systems.

## ğŸ—ï¸ Architecture

- **Frontend**: React.js with glassmorphism UI, 3D visualizations, and AI chat integration
- **Backend**: Node.js/Express.js REST API with comprehensive logging and security
- **Database**: MongoDB for data persistence
- **Authentication**: Dual system - JWT for web users, API keys for IoT devices

## ğŸ“ Project Structure

```
iot-air-quality-dashboard/
â”œâ”€â”€ backend/                 # Node.js/Express API server
â”‚   â”œâ”€â”€ models/             # MongoDB schemas
â”‚   â”œâ”€â”€ routes/             # API route handlers
â”‚   â”œâ”€â”€ middleware/         # Authentication & logging middleware
â”‚   â”œâ”€â”€ scripts/            # Database seeding scripts
â”‚   â”œâ”€â”€ .env                # Backend environment variables
â”‚   â”œâ”€â”€ server.js           # Main server file
â”‚   â””â”€â”€ package.json        # Backend dependencies
â”œâ”€â”€ frontend/               # React.js application
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/     # Reusable React components
â”‚   â”‚   â”œâ”€â”€ pages/          # Main application pages
â”‚   â”‚   â”œâ”€â”€ hooks/          # Custom React hooks
â”‚   â”‚   â”œâ”€â”€ utils/          # Utility functions
â”‚   â”‚   â””â”€â”€ styles/         # CSS and styling
â”‚   â”œâ”€â”€ public/             # Static assets
â”‚   â”œâ”€â”€ .env.local          # Frontend environment variables
â”‚   â””â”€â”€ package.json        # Frontend dependencies
â”œâ”€â”€ postman/                # API testing collection
â””â”€â”€ README.md               # This file
```

## ğŸš€ Quick Start

### Prerequisites
- Node.js (v16 or higher)
- MongoDB (v4.4 or higher)
- npm or yarn package manager

### 1. Clone and Setup

```bash
git clone <repository-url>
cd iot-air-quality-dashboard
```

### 2. Backend Setup

```bash
cd backend
npm install
```

Create `.env` file in backend directory:
```env
MONGODB_URI=mongodb://localhost:27017/iot-air-quality-dashboard
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
PORT=5000
NODE_ENV=development
CORS_ORIGIN=http://localhost:3000
```

### 3. Frontend Setup

```bash
cd ../frontend
npm install
```

Create `.env.local` file in frontend directory:
```env
REACT_APP_API_URL=http://localhost:5000/api
REACT_APP_OPENROUTER_API_KEY=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
```

### 4. Database Setup

```bash
cd ../backend
npm run seed
```

### 5. Start Development Servers

Backend:
```bash
cd backend
npm run dev
```

Frontend (in new terminal):
```bash
cd frontend
npm start
```

## ğŸ” Authentication Systems

### Web User Authentication (JWT)
- Users log in with email/password
- Receive JWT token for authenticated requests
- Token expires after 24 hours
- Used for dashboard access and profile management

### IoT Device Authentication (API Key)
- Each user gets a unique device API key
- Devices use `X-API-Key` header for authentication
- Keys can be regenerated by users
- Used for submitting sensor data

## ğŸ“Š API Endpoints

### Authentication
- `POST /api/auth/login` - User login
- `POST /api/auth/register` - User registration (admin only)

### IoT Data
- `POST /api/data` - Submit sensor data (API Key required)
- `GET /api/data` - Retrieve user's data (JWT required)

### User Profile
- `GET /api/users/me` - Get user profile (JWT required)
- `PUT /api/users/me` - Update profile (JWT required)
- `POST /api/users/me/api-key` - Regenerate API key (JWT required)

### Admin
- `GET /api/admin/users` - List all users (Admin only)
- `GET /api/admin/logs` - View API logs (Admin only)
- `DELETE /api/admin/users/:id` - Delete user (Admin only)

## ğŸ¨ Design System

### Color Palette
- **Primary**: Deep Navy Blue (#0a192f)
- **Secondary**: Dark Slate (#112240)
- **Accent**: Vibrant Cyan (#64ffda)
- **Background**: Dynamic gradients with glassmorphism effects

### Typography
- **Font Family**: 'Inter' from Google Fonts
- **Icons**: Lucide React for consistency

### Animations
- **Library**: Framer Motion
- **Effects**: Smooth transitions, fade-ins, hover effects

## ğŸ”§ Development

### Backend Scripts
```bash
npm run dev      # Start development server with nodemon
npm start        # Start production server
npm run seed     # Seed database with initial data
```

### Frontend Scripts
```bash
npm start        # Start development server
npm run build    # Build for production
npm test         # Run tests
```

## ğŸ“± IoT Device Integration

### Arduino Example
```cpp
#include <WiFi.h>
#include <HTTPClient.h>

const char* apiKey = "your-device-api-key-here";
const char* serverURL = "http://your-server.com/api/data";

void sendSensorData() {
  HTTPClient http;
  http.begin(serverURL);
  http.addHeader("Content-Type", "application/json");
  http.addHeader("X-API-Key", apiKey);
  
  String jsonData = "{\"deviceId\":\"sensor-01\",\"pm25\":12.5,\"pm10\":18.2,\"temperature\":23.1,\"humidity\":45.3,\"co2\":410,\"voc\":0.5,\"aqi\":45}";
  
  int httpResponseCode = http.POST(jsonData);
  http.end();
}
```

### MicroPython Example
```python
import urequests
import ujson

api_key = "your-device-api-key-here"
server_url = "http://your-server.com/api/data"

def send_sensor_data(sensor_data):
    headers = {
        "Content-Type": "application/json",
        "X-API-Key": api_key
    }
    
    data = {
        "deviceId": "sensor-01",
        "pm25": sensor_data["pm25"],
        "pm10": sensor_data["pm10"],
        "temperature": sensor_data["temperature"],
        "humidity": sensor_data["humidity"],
        "co2": sensor_data["co2"],
        "voc": sensor_data["voc"],
        "aqi": sensor_data["aqi"]
    }
    
    response = urequests.post(server_url, data=ujson.dumps(data), headers=headers)
    response.close()
```

## ğŸ›¡ï¸ Security Features

- **JWT Authentication** with secure token generation
- **API Key Authentication** for IoT devices
- **Role-based Access Control** (Admin/User)
- **Request Rate Limiting** to prevent abuse
- **Input Validation** and sanitization
- **CORS Protection** with specific origin whitelist
- **Helmet.js** for security headers
- **Password Hashing** with bcrypt

## ğŸ” Monitoring & Logging

- **API Request Logging** with response times and error tracking
- **User Activity Tracking** including API key usage
- **Error Logging** with stack traces in development
- **Performance Monitoring** with response time analytics

## ğŸš€ Deployment

### Environment Variables

Backend (.env):
- `MONGODB_URI` - MongoDB connection string
- `JWT_SECRET` - Secret key for JWT signing
- `PORT` - Server port (default: 5000)
- `NODE_ENV` - Environment (development/production)
- `CORS_ORIGIN` - Frontend URL for CORS

Frontend (.env.local):
- `REACT_APP_API_URL` - Backend API URL
- `REACT_APP_OPENROUTER_API_KEY` - OpenRouter API key for AI features

## ğŸ“„ License

This project is licensed under the ISC License - see the LICENSE file for details.

## ğŸ¤ Contributing

This is an internal corporate tool. Please follow the established coding standards and submit pull requests for review.

## ğŸ“ Support

For technical support or questions, please contact the development team or create an issue in the project repository.